{"version":3,"file":"index.esm.js","sources":["../src/helpers/QuestionSDK.ts","../src/helpers/DTFunctions.ts"],"sourcesContent":["import { Question } from \"../types/Question\";\r\n\r\nclass QuestionSDK {\r\n  constructor() {}\r\n\r\n  createQuestion(id: string, question: string) {\r\n    let obj = {\r\n      id: id,\r\n      description: question,\r\n    } as Question;\r\n    return obj;\r\n  }\r\n}\r\nexport default QuestionSDK;\r\n","export enum LOG_LEVELS {\r\n  NONE = 0,\r\n  ERROR = 1,\r\n  WARN = 2,\r\n  INFO = 3,\r\n  DEBUG = 4\r\n}\r\n\r\n//let currentLogLevel: LOG_LEVELS = LOG_LEVELS.ERROR; // Set the desired log level here\r\n\r\ninterface PlatformParams {\r\n  oauth_client_id: string;\r\n  oauth_client_secret: string;\r\n  dt_account_urn: string;\r\n  oauth_sso_endpoint: string;\r\n  dt_platform_environment: string;\r\n  documentType: string;\r\n  documentName: string;\r\n  validationId: string;\r\n  maxScore: number;\r\n  getScore: (auditInfo: any, headers: Headers) => Promise<{ score: number, assertion_fails: any[] }>;\r\n}\r\n\r\ninterface Gen2Params {\r\n  dt_gen2_environment: string;\r\n  dt_access_token: string;\r\n  validationId: string;\r\n  maxScore: number;\r\n  entity_type: string;\r\n  entity_name_to_query: string;\r\n  config_endpoint: string;\r\n  config_name_to_query: string;\r\n  config_endpoint_extra_param: string;\r\n  settings_schema_id: string;\r\n  settings_scope: string;\r\n  getScore: (auditInfo: any,headers: Headers) => Promise<{ score: number, assertion_fails: any[] }>;\r\n}\r\n\r\n\r\ninterface AuditInfoParams {\r\n  documentList?: any;\r\n  documentDetails?: any;\r\n  entitiesList?: any;\r\n  entitiesData?: any;\r\n  settingsData?: any;\r\n  configList?: any;\r\n  configDetails?: any;\r\n  problemsData?: any;\r\n  userDashboardList?: any;\r\n  userDashboardDetails?: any;\r\n}\r\n\r\nclass DTFunctions {\r\n\r\n  private currentLogLevel: LOG_LEVELS;\r\n\r\n  constructor(currentLogLevel: LOG_LEVELS = LOG_LEVELS.ERROR) {\r\n    this.currentLogLevel = currentLogLevel;\r\n  }\r\n\r\n  setLogLevel(level: LOG_LEVELS): void {\r\n    this.currentLogLevel = level;\r\n  }\r\n   // A boilerplate function to perform a series of operations\r\n   async performGradingPlatform({\r\n    oauth_client_id,\r\n    oauth_client_secret,\r\n    dt_account_urn,\r\n    oauth_sso_endpoint,\r\n    dt_platform_environment,\r\n    documentType,\r\n    documentName,\r\n    validationId,\r\n    maxScore,\r\n    getScore\r\n  }: PlatformParams): Promise<{ validationId: string, maxScore: number, finalScore: number, auditInfo: any }> {\r\n      // Get the authorization header\r\n    let oauth_header = null;\r\n    const dt_access_token = await this.getOauthAccessToken(oauth_client_id, oauth_client_secret, dt_account_urn, oauth_sso_endpoint);\r\n    if (!dt_access_token) {\r\n      throw new Error(\"Failed to obtain access token\");\r\n    }\r\n    oauth_header = await this.getAuthorizationHeaderPlatform(dt_access_token);\r\n\r\n    // Get documents list\r\n    const documentsList = await this.getDocumentsList(dt_platform_environment, documentType, documentName, oauth_header);\r\n\r\n    // Get document details\r\n    const documentDetails = await this.getDocumentDetails(dt_platform_environment, documentsList, oauth_header);\r\n\r\n    // Generate Audit Info\r\n    const auditInfo = await this.generateAuditInfo({ documentList: documentsList, documentDetails: documentDetails });\r\n\r\n    // Get the score\r\n    const { score: finalScore, assertion_fails: assertionFails } = await getScore(auditInfo, oauth_header);\r\n    auditInfo.assertionFails = assertionFails;\r\n\r\n    return {\r\n      validationId: validationId,\r\n      maxScore: maxScore,\r\n      finalScore: finalScore,\r\n      auditInfo: auditInfo\r\n    };\r\n  }\r\n\r\n  \r\n  async performGradingGen2({\r\n    dt_gen2_environment,\r\n    dt_access_token,\r\n    validationId,\r\n    maxScore,\r\n    entity_type,\r\n    entity_name_to_query,\r\n    config_endpoint,\r\n    config_name_to_query,\r\n    config_endpoint_extra_param,\r\n    settings_schema_id,\r\n    settings_scope,\r\n    getScore\r\n  }: Gen2Params): Promise<{ validationId: string, maxScore: number, finalScore: number, auditInfo: any }> {\r\n      // Get the authorization header\r\n    const auth_header = await this.getAuthorizationHeaderGen2(dt_access_token);\r\n  \r\n    // Get the entities list\r\n    const entitiesList = await this.getEntities(dt_gen2_environment, entity_type, entity_name_to_query, auth_header);\r\n  \r\n    // Get the entities data\r\n    const entitiesData = await this.getEntitiesData(dt_gen2_environment, entitiesList, auth_header);\r\n  \r\n    // Get API v1 config data\r\n    const configList = await this.getConfigsList(dt_gen2_environment, config_endpoint, config_name_to_query, config_endpoint_extra_param, entitiesList, auth_header);\r\n  \r\n    const configDetails = await this.getConfigsData(dt_gen2_environment, config_endpoint, configList, auth_header);\r\n\r\n    // Get the settings data\r\n    const settingsData = await this.getSettingsData(dt_gen2_environment, entitiesList, auth_header, settings_schema_id, settings_scope);\r\n  \r\n    // Get the problems data\r\n    const problemsData = await this.getProblemsData(dt_gen2_environment, entitiesList, auth_header);\r\n \r\n    // Get Dashboard List\r\n    const userDashboardList = await this.getUserDashboardList(dt_gen2_environment, auth_header);\r\n    const userDashboardDetails = await this.getDashboardsData(dt_gen2_environment, userDashboardList, auth_header);\r\n\r\n\r\n      // Generate Audit Info\r\n    const auditInfo = await this.generateAuditInfo({\r\n      entitiesList: entitiesList,\r\n      entitiesData: entitiesData,\r\n      settingsData: settingsData,\r\n      configList: configList,\r\n      configDetails: configDetails,\r\n      problemsData: problemsData,\r\n      userDashboardList: userDashboardList,\r\n      userDashboardDetails: userDashboardDetails\r\n    });\r\n\r\n    // Get the score\r\n    const { score: finalScore, assertion_fails: assertionFails } = await getScore(auditInfo,auth_header);\r\n    auditInfo.assertionFails = assertionFails;\r\n\r\n    return {\r\n      validationId: validationId,\r\n      maxScore: maxScore,\r\n      finalScore: finalScore,\r\n      auditInfo: auditInfo\r\n    };\r\n}\r\n\r\n  // A utility function to get the OAuth access token\r\n  async getOauthAccessToken(\r\n    oauth_client_id: string,\r\n    oauth_client_secret: string,\r\n    dt_account_urn: string,\r\n    oauth_sso_endpoint: string\r\n  ): Promise<string | undefined> {\r\n    const myHeaders = new Headers();\r\n    myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\r\n    const urlencoded = new URLSearchParams();\r\n    urlencoded.append(\"grant_type\", \"client_credentials\");\r\n    urlencoded.append(\"client_id\", oauth_client_id);\r\n    urlencoded.append(\"client_secret\", oauth_client_secret);\r\n    urlencoded.append(\"scope\", \"document:documents:admin document:documents:read document:documents:write document:environment-shares:read document:direct-shares:read \");\r\n    urlencoded.append(\"resource\", dt_account_urn);\r\n\r\n    const requestOptions: RequestInit = {\r\n      method: \"POST\",\r\n      headers: myHeaders,\r\n      body: urlencoded,\r\n      redirect: \"follow\"\r\n    };\r\n\r\n    try {\r\n      const response = await fetch(oauth_sso_endpoint, requestOptions);\r\n  \r\n      if (!response.ok) {\r\n        // Check if the response status is 400\r\n        if (response.status === 400) {\r\n          const errorDetails = await response.text();\r\n          this.log(LOG_LEVELS.ERROR, `oAuth Access Token Error: ${response.status} ${errorDetails}`);\r\n          throw new Error(`Bad Request: ${errorDetails}`);\r\n        } else {\r\n          // Handle other non-OK responses\r\n          const errorDetails = await response.text();\r\n          this.log(LOG_LEVELS.ERROR, `oAuth Access Token Error: ${response.status} ${errorDetails}`);\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n      }\r\n  \r\n      const result = await response.json();\r\n      this.log(LOG_LEVELS.DEBUG, \"oAuth Access Token result:\\n\" + JSON.stringify(result, null, 2));\r\n      return result.access_token;\r\n    } catch (error: any) {\r\n      this.log(LOG_LEVELS.ERROR, `oAuth Access Token Error: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  // A utility function to get the authorization header\r\n    async getAuthorizationHeaderPlatform(token: string): Promise<Headers> {\r\n      // Create the headers object\r\n      const headers = new Headers();\r\n      // Add the authorization header\r\n      headers.append(\"Authorization\", \"Bearer \" + token);\r\n      return headers;\r\n    }\r\n  \r\n    // A utility function to get the authorization header\r\n    async  getAuthorizationHeaderGen2(token: string): Promise<Headers> {\r\n      // Create the headers object\r\n      const headers = new Headers();\r\n      // Add the authorization header\r\n      headers.append(\"Authorization\", \"Api-Token \" + token);\r\n      return headers;\r\n    }\r\n\r\n    // A utility function to get the entities list\r\n    async getEntities(environment: string, entity_type: string, entity_name_to_query: string, headers: Headers): Promise<any> {\r\n      // Get the application with the specified name\r\n      const entitySelector = `type(${entity_type}),entityName.contains(${entity_name_to_query})`;\r\n      // Create the request object\r\n      const request = new Request(`${environment}/api/v2/entities?entitySelector=${entitySelector}`, {\r\n        method: \"GET\",\r\n        headers: headers,\r\n      });\r\n  \r\n      let entities = null;\r\n      try {\r\n        const response = await fetch(request);\r\n        if (response.ok) {\r\n          entities = await response.json();\r\n        } else {\r\n          const errorDetails = await response.text();\r\n          this.log(LOG_LEVELS.ERROR, `\"Entity ID Error: ${response.status} ${errorDetails}`);\r\n        }\r\n      } catch (error) {\r\n        this.log(LOG_LEVELS.ERROR, ` ${error}`);\r\n      }\r\n  \r\n      return entities;\r\n    }\r\n  \r\n    // A utility function to get the entities data\r\n    async getEntitiesData(environment: string, entitiesList: any, headers: Headers): Promise<any[]> {\r\n      if (entitiesList === null) {\r\n        return [];\r\n      }\r\n  \r\n      let entitiesData: any[] = [];\r\n      for (const entity of entitiesList.entities) {\r\n        const entityId = entity.entityId;\r\n        const request = new Request(`${environment}/api/v2/entities/${entityId}`, {\r\n          method: \"GET\",\r\n          headers: headers,\r\n        });\r\n  \r\n        try {\r\n          const response = await fetch(request);\r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            entitiesData.push(data);\r\n          } else {\r\n            const errorDetails = await response.text();\r\n            this.log(LOG_LEVELS.ERROR, `Entity Details Error: ${response.status} ${errorDetails}`);\r\n          }\r\n        } catch (error) {\r\n          this.log(LOG_LEVELS.ERROR, ` ${error}`);\r\n        }\r\n      }\r\n  \r\n      return entitiesData;\r\n    }\r\n\r\n\r\n  // A utility function to get the dashboard configs list\r\n  async getUserDashboardList(\r\n    environment: string,\r\n    headers: Headers\r\n  ): Promise<any[]> {\r\n    let dashboard_list: any[] = [];\r\n    let user_dashboard_list: any[] = [];\r\n    const config_endpoint = \"/api/config/v1/dashboards\";\r\n    const config_endpoint_extra_param = \"\";\r\n    \r\n    try {\r\n      dashboard_list = await this.getConfigsList(\r\n        environment,\r\n        config_endpoint,\r\n        \"\", \r\n        config_endpoint_extra_param,\r\n        null,\r\n        headers\r\n      );\r\n      this.log(LOG_LEVELS.DEBUG, \"dashboard_list raw:\\n\" + JSON.stringify(dashboard_list[0].dashboards, null, 2));\r\n      // Filter the dashboards based on the owner field\r\n      let dashboards = dashboard_list[0].dashboards.filter((dashboard: any) => dashboard.owner !== \"Dynatrace\");\r\n    \r\n      if (dashboards.length > 0) {\r\n        user_dashboard_list.push({dashboards: dashboards});\r\n      }\r\n      this.log(LOG_LEVELS.DEBUG, \"user_dashboard_list:\\n\" + JSON.stringify(user_dashboard_list[0].dashboards, null, 2));\r\n    } catch (error) {\r\n      this.log(LOG_LEVELS.ERROR, `getUserDashboardList Error: ${error}`);\r\n    }\r\n\r\n    return user_dashboard_list;\r\n  }\r\n\r\n\r\n  async getDashboardsData(\r\n    environment: string,\r\n    dashboardList: any,\r\n    headers: Headers\r\n  ): Promise<any[]> {\r\n    if (dashboardList === null) {\r\n      return [];\r\n    }\r\n\r\n    let dashboardsData: any[] = [];\r\n    const config_endpoint = \"/api/config/v1/dashboards\";\r\n\r\n    try {\r\n      dashboardsData = await this.getConfigsData(\r\n        environment,\r\n        config_endpoint,\r\n        dashboardList,\r\n        headers\r\n      );\r\n      this.log(LOG_LEVELS.DEBUG, \"dashboardsData:\\n\" + JSON.stringify(dashboardsData, null, 2));\r\n    } catch (error) {\r\n      this.log(LOG_LEVELS.ERROR, `getDashboardsData Error: ${error}`);\r\n    }\r\n\r\n    return dashboardsData;\r\n  }\r\n\r\n  // A utility function to get the configs list\r\n  async getConfigsList(\r\n    environment: string,\r\n    config_endpoint: string,\r\n    config_name_to_query: string,\r\n    config_endpoint_extra_param: string,\r\n    entitiesList: any,\r\n    headers: Headers\r\n  ): Promise<any[]> {\r\n    let config_list: any[] = [];\r\n    if (config_endpoint === \"\") {\r\n      return [];\r\n    }\r\n    let parameters = \"\";\r\n    if (config_endpoint_extra_param.includes(\"/\") && !entitiesList) {\r\n      for (const entity of entitiesList.entities) {\r\n        const entityId = entity.entityId;\r\n        parameters = \"/\" + entityId + config_endpoint_extra_param;\r\n        let result = await this.callConfigList(environment, config_endpoint, config_name_to_query, parameters, headers);\r\n        config_list.push(result);\r\n      }\r\n      this.log(LOG_LEVELS.DEBUG, \"Config List with extra param /\");\r\n    } else if (config_endpoint_extra_param.includes(\"?\")) {\r\n      parameters = config_endpoint_extra_param;\r\n      let result = await this.callConfigList(environment, config_endpoint, config_name_to_query, parameters, headers);\r\n      config_list.push(result);\r\n      this.log(LOG_LEVELS.DEBUG, \"Config List with extra param ?\");\r\n    } else {\r\n      let result = await this.callConfigList(environment, config_endpoint, config_name_to_query, parameters, headers);\r\n      config_list.push(result);\r\n    }\r\n\r\n    return config_list;\r\n  }\r\n\r\n  // A utility function to call the config list\r\n  async callConfigList(\r\n    environment: string,\r\n    config_endpoint: string,\r\n    config_name_to_query: string,\r\n    parameters: string,\r\n    headers: Headers\r\n  ): Promise<any> {\r\n    const request = new Request(environment + config_endpoint + parameters, {\r\n      method: \"GET\",\r\n      headers: headers,\r\n    });\r\n\r\n    let configlist = [];\r\n    try {\r\n      const response = await fetch(request);\r\n      if (response.ok) {\r\n        configlist = await response.json();\r\n      } else {\r\n        const errorDetails = await response.text();\r\n        this.log(LOG_LEVELS.ERROR, `ConfigList Error: ${response.status} ${errorDetails}`);\r\n      }\r\n    } catch (error) {\r\n      this.log(LOG_LEVELS.ERROR, `${error}`);      \r\n    }\r\n    return configlist;\r\n  }\r\n  \r\n  async getConfigsData(\r\n    environment: string,\r\n    config_endpoint: string,\r\n    configList: any,\r\n    headers: Headers\r\n  ): Promise<any[]> {\r\n    if (configList === null) {\r\n      return [];\r\n    }\r\n\r\n    let configsData: any[] = [];\r\n    for (const item of configList) {\r\n      for (const key in item) {\r\n        if (key && key != null && Array.isArray(item[key])) {\r\n          for (const subItem of item[key]) {\r\n            const id = subItem ? subItem.entityId || subItem.id : null;\r\n            if (id) {\r\n              const request_details: RequestInfo = new Request(environment + config_endpoint + \"/\" + id, {\r\n                method: 'GET',\r\n                headers: headers,\r\n              });\r\n\r\n              try {\r\n                const response_details = await fetch(request_details);\r\n                if (response_details.ok) {\r\n                  const configdetails = await response_details.json();\r\n                  configsData.push(configdetails);\r\n                } else {\r\n                  const errorDetails = await response_details.text();\r\n                  this.log(LOG_LEVELS.ERROR, `Config Data Error: ${response_details.status} ${errorDetails}`);\r\n                }\r\n              } catch (error) {\r\n                this.log(LOG_LEVELS.ERROR, `${error}`);    \r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return configsData;\r\n  }\r\n\r\n  // A utility function to get the settings data with schema\r\n  async getSettingsData(\r\n    environment: string,\r\n    entitiesList: any,\r\n    headers: Headers,\r\n    schemaId: string,\r\n    scope: string\r\n  ): Promise<any[]> {\r\n    let settings_list: any[] = [];\r\n    if (schemaId === \"\") {\r\n      return [];\r\n    }\r\n\r\n    let generated_scope = \"\";\r\n    // if scope equals \"entity\", replace the dynamic entityID, if the scope is \"environment\" it will remain as is\r\n    if (scope === \"entity\") {\r\n      for (const entity of entitiesList.entities) {\r\n        const entityId = entity.entityId;\r\n        generated_scope = generated_scope + entityId + \",\";\r\n      }\r\n    } else {\r\n      generated_scope = scope;\r\n    }\r\n\r\n    if (generated_scope == \"\") {\r\n      return [];\r\n    }\r\n\r\n    const parameters = \"schemaIds=\" + schemaId + \"&scopes=\" + generated_scope;\r\n    const request = new Request(environment + \"/api/v2/settings/objects?\" + parameters, {\r\n      method: \"GET\",\r\n      headers: headers,\r\n    });\r\n    let data = {};\r\n    try {\r\n      const response = await fetch(request);\r\n      if (response.ok) {\r\n        data = await response.json();\r\n        settings_list.push(data);\r\n      } else {\r\n        const errorDetails = await response.text();\r\n        this.log(LOG_LEVELS.ERROR, `Settings Data Error: ${response.status} ${errorDetails}`);\r\n      }\r\n    } catch (error) {\r\n      this.log(LOG_LEVELS.ERROR, `${error}`);    \r\n    }\r\n    return settings_list;\r\n  }\r\n\r\n// A utility function to find the Problems\r\nasync getProblemsData(\r\n  environment: string,\r\n  entitiesList: any,\r\n  headers: Headers\r\n): Promise<any> {\r\n  if (!entitiesList || !entitiesList.entities || entitiesList.entities.length <= 0) {\r\n    return null;\r\n  }\r\n\r\n  let rootCauseEntities = \"\";\r\n  for (const entity of entitiesList.entities) {\r\n    const entityId = entity.entityId;\r\n    rootCauseEntities += \",\" + entityId;\r\n  }\r\n  // Remove the leading comma\r\n  rootCauseEntities = rootCauseEntities.substring(1);\r\n\r\n  // Create the request object\r\n  const request = new Request(\r\n    `${environment}/api/v2/problems?from=now-6h&problemSelector=rootCauseEntity(${rootCauseEntities})`,\r\n    {\r\n      method: \"GET\",\r\n      headers: headers,\r\n    }\r\n  );\r\n\r\n  let data = null;\r\n  try {\r\n    const response = await fetch(request);\r\n    if (response.ok) {\r\n      data = await response.json();\r\n    } else {\r\n      const errorDetails = await response.text();\r\n      this.log(LOG_LEVELS.ERROR, `Problems Data Error: ${response.status} ${errorDetails}`);\r\n    }\r\n  } catch (error) {\r\n    this.log(LOG_LEVELS.ERROR, `${error}`);    \r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n  // A utility function to get the documents list\r\n  async getDocumentsList(\r\n    environment: string,\r\n    document_type: string,\r\n    document_name_to_query: string,\r\n    headers: Headers\r\n  ): Promise<any> {\r\n    const documentFilter = `name contains '${document_name_to_query}' and type == '${document_type}'`;\r\n    const request = new Request(`${environment}/platform/document/v1/documents?admin-access=true&filter=${encodeURIComponent(documentFilter)}`, {\r\n      method: \"GET\",\r\n      headers: headers,\r\n    });\r\n  \r\n    this.log(LOG_LEVELS.INFO, \"documentFilter:\\n\" + JSON.stringify(documentFilter, null, 2));\r\n  \r\n    let documents = null;\r\n    try {\r\n      this.log(LOG_LEVELS.INFO, \"headers:\\n\" + JSON.stringify(headers, null, 2));\r\n      const response = await fetch(request);\r\n      this.log(LOG_LEVELS.INFO, \"response:\\n\" + JSON.stringify(response, null, 2));\r\n      if (response.ok) {\r\n        documents = await response.json();\r\n      } else {\r\n        const errorDetails = await response.text();\r\n        this.log(LOG_LEVELS.ERROR, `Document List Error: ${response.status} ${errorDetails}`);\r\n      }\r\n    } catch (error) {\r\n      this.log(LOG_LEVELS.ERROR, `${error}`);    \r\n    }\r\n  \r\n    return documents;\r\n  }   \r\n\r\n    // A utility function to get the document details\r\n    async getDocumentDetails(\r\n      environment: string,\r\n      documentsList: any,\r\n      headers: Headers\r\n    ): Promise<any[]> {\r\n      if (documentsList === null) {\r\n        return [];\r\n      }\r\n    \r\n      let documentDetails: any[] = [];\r\n      const requestOptions: RequestInit = {\r\n        method: \"GET\",\r\n        headers: headers,\r\n      };\r\n    \r\n      for (const document of documentsList.documents) {\r\n        const documentId = String(document.id);\r\n        try {\r\n          const response = await fetch(`${environment}/platform/document/v1/documents/${documentId}/content?admin-access=true`, requestOptions);\r\n          if (response.ok) {\r\n            const result = await response.json();\r\n            documentDetails.push(result);\r\n          } else {\r\n            const errorDetails = await response.text();\r\n            this.log(LOG_LEVELS.ERROR, `Document Details Error: ${response.status} ${errorDetails}`);\r\n          }\r\n        } catch (error) {\r\n          this.log(LOG_LEVELS.ERROR, `${error}`);    \r\n        }\r\n      }\r\n    \r\n      return documentDetails;\r\n    }\r\n\r\n    async generateAuditInfo({\r\n      documentList,\r\n      documentDetails,\r\n      entitiesList,\r\n      entitiesData,\r\n      settingsData,\r\n      configList,\r\n      configDetails,\r\n      problemsData,\r\n      userDashboardList,\r\n      userDashboardDetails\r\n    }: AuditInfoParams): Promise<any> {\r\n      let audit_info: any = {};\r\n    \r\n      if (documentList != null) {\r\n        audit_info[\"documentList\"] = documentList;\r\n      }\r\n    \r\n      if (documentDetails != null) {\r\n        audit_info[\"documentDetails\"] = documentDetails;\r\n      }\r\n    \r\n      if (entitiesList != null) {\r\n        audit_info[\"entitiesList\"] = entitiesList;\r\n      }\r\n    \r\n      if (entitiesData != null) {\r\n        audit_info[\"entitiesData\"] = entitiesData;\r\n      }\r\n    \r\n      if (configList != null) {\r\n        audit_info[\"configList\"] = configList;\r\n      }\r\n    \r\n      if (configDetails != null && configDetails.error == null) {\r\n        audit_info[\"configDetails\"] = configDetails;\r\n      }\r\n    \r\n      if (settingsData != null) {\r\n        audit_info[\"settingsData\"] = settingsData;\r\n      }\r\n    \r\n      if (problemsData != null) {\r\n        audit_info[\"problemsData\"] = problemsData;\r\n      }\r\n\r\n      if (userDashboardList != null) {\r\n        audit_info[\"userDashboardList\"] = userDashboardList;\r\n      }\r\n\r\n      if (userDashboardDetails != null) {\r\n        audit_info[\"userDashboardDetails\"] = userDashboardDetails;\r\n      }\r\n    \r\n      audit_info.assertionFails = [];\r\n\r\n    return audit_info;\r\n  }   \r\n\r\n\r\n    checkKeywordsExistence(inputValue: string, keywords: string[]): boolean {\r\n      return keywords.every(keyword => inputValue.toLowerCase().includes(keyword.toLowerCase()));\r\n    }\r\n\r\n    findIdInObject(object: any): string | null {\r\n      for (const property in object) {\r\n        if (object.hasOwnProperty(property)) {\r\n          if (typeof object[property] === \"object\") {\r\n            const id = this.findIdInObject(object[property]);\r\n            if (id) return id;\r\n          } else if (property === 'id' || property === 'entityId') {\r\n            return object[property];\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n\r\n    log(level: LOG_LEVELS, message: string): void {\r\n      if (level <= this.currentLogLevel) {\r\n        console.log(message);\r\n      }\r\n    }\r\n\r\n}\r\n\r\nexport default DTFunctions;"],"names":["QuestionSDK","prototype","createQuestion","id","question","description","_iteratorSymbol","Symbol","iterator","pact","state","value","s","_Pact","o","_settle","bind","v","then","observer","LOG_LEVELS","onFulfilled","onRejected","result","this","callback","e","_this","_isSettledPact","thenable","array","body","check","reject","_cycle","i","length","target","step","done","_fixup","TypeError","push","_forTo","values","DTFunctions","currentLogLevel","ERROR","_proto","setLogLevel","level","performGradingPlatform","_ref","oauth_client_id","oauth_client_secret","dt_account_urn","oauth_sso_endpoint","dt_platform_environment","documentType","documentName","validationId","maxScore","getScore","oauth_header","Promise","resolve","getOauthAccessToken","dt_access_token","Error","getAuthorizationHeaderPlatform","_this$getAuthorizatio","getDocumentsList","documentsList","getDocumentDetails","documentDetails","generateAuditInfo","documentList","auditInfo","_ref2","finalScore","score","assertionFails","assertion_fails","performGradingGen2","_ref3","dt_gen2_environment","entity_type","entity_name_to_query","config_endpoint","config_name_to_query","config_endpoint_extra_param","settings_schema_id","settings_scope","_this2","getAuthorizationHeaderGen2","auth_header","getEntities","entitiesList","getEntitiesData","entitiesData","getConfigsList","configList","getConfigsData","configDetails","getSettingsData","settingsData","getProblemsData","problemsData","getUserDashboardList","userDashboardList","getDashboardsData","userDashboardDetails","_ref4","_this3","myHeaders","Headers","append","urlencoded","URLSearchParams","requestOptions","method","headers","redirect","_catch","fetch","response","_temp2","_result2","json","log","DEBUG","JSON","stringify","access_token","_temp","ok","status","text","errorDetails","error","message","token","environment","_this4","request","Request","entities","_temp4","_temp3","_response$json","_this5","_temp7","_forOf","entity","entityId","_temp6","_temp5","data","_this6","dashboard_list","user_dashboard_list","_temp8","_this6$getConfigsList","dashboards","filter","dashboard","owner","dashboardList","_this7","dashboardsData","_temp9","_this7$getConfigsData","_this8","config_list","parameters","_temp13","includes","_temp11","_temp10","callConfigList","_temp14","_this9","configlist","_temp16","_temp15","_response$json2","_this10","configsData","_temp20","item","keys","key","Array","isArray","subItem","_temp19","request_details","_temp18","response_details","_temp17","configdetails","_forIn","schemaId","scope","_this11","settings_list","generated_scope","_step","_iterator","_createForOfIteratorHelperLoose","_temp22","_temp21","_response$json3","_this12","_step2","rootCauseEntities","_iterator2","substring","_temp24","_temp23","_response$json4","document_type","document_name_to_query","_this13","documentFilter","encodeURIComponent","INFO","documents","_temp26","_temp25","_response$json5","_this14","_temp29","document","documentId","String","_temp28","_temp27","_ref5","audit_info","checkKeywordsExistence","inputValue","keywords","every","keyword","toLowerCase","findIdInObject","object","property","hasOwnProperty","console"],"mappings":"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"}