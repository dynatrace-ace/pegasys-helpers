{"version":3,"file":"index.umd.js","sources":["../src/helpers/QuestionSDK.ts","../src/helpers/DTFunctions.ts"],"sourcesContent":["import { Question } from \"../types/Question\";\r\n\r\nclass QuestionSDK {\r\n  constructor() {}\r\n\r\n  createQuestion(id: string, question: string) {\r\n    let obj = {\r\n      id: id,\r\n      description: question,\r\n    } as Question;\r\n    return obj;\r\n  }\r\n}\r\nexport default QuestionSDK;\r\n","export enum LOG_LEVELS {\r\n  NONE = 0,\r\n  ERROR = 1,\r\n  WARN = 2,\r\n  INFO = 3,\r\n  DEBUG = 4\r\n}\r\n\r\n//let currentLogLevel: LOG_LEVELS = LOG_LEVELS.ERROR; // Set the desired log level here\r\n\r\ninterface PlatformParams {\r\n  oauth_client_id: string;\r\n  oauth_client_secret: string;\r\n  dt_account_urn: string;\r\n  oauth_sso_endpoint: string;\r\n  dt_platform_environment: string;\r\n  documentType: string;\r\n  documentName: string;\r\n  validationId: string;\r\n  maxScore: number;\r\n  getScore: (auditInfo: any, headers: Headers) => Promise<{ score: number, assertion_fails: any[] }>;\r\n}\r\n\r\ninterface Gen2Params {\r\n  dt_gen2_environment: string;\r\n  dt_access_token: string;\r\n  validationId: string;\r\n  maxScore: number;\r\n  entity_type: string;\r\n  entity_name_to_query: string;\r\n  config_endpoint: string;\r\n  config_name_to_query: string;\r\n  config_endpoint_extra_param: string;\r\n  settings_schema_id: string;\r\n  settings_scope: string;\r\n  getScore: (auditInfo: any,headers: Headers) => Promise<{ score: number, assertion_fails: any[] }>;\r\n}\r\n\r\n\r\ninterface AuditInfoParams {\r\n  documentList?: any;\r\n  documentDetails?: any;\r\n  entitiesList?: any;\r\n  entitiesData?: any;\r\n  settingsData?: any;\r\n  configList?: any;\r\n  configDetails?: any;\r\n  problemsData?: any;\r\n  userDashboardList?: any;\r\n  userDashboardDetails?: any;\r\n}\r\n\r\nclass DTFunctions {\r\n  private currentLogLevel: LOG_LEVELS;\r\n  private jsonSizeThreshold = 200000; // Set the size threshold in bytes\r\n\r\n  constructor(currentLogLevel: LOG_LEVELS = LOG_LEVELS.ERROR) {\r\n    this.currentLogLevel = currentLogLevel;\r\n  }\r\n\r\n  setLogLevel(level: LOG_LEVELS): void {\r\n    this.currentLogLevel = level;\r\n  }\r\n   // A boilerplate function to perform a series of operations\r\n   async performGradingPlatform({\r\n    oauth_client_id,\r\n    oauth_client_secret,\r\n    dt_account_urn,\r\n    oauth_sso_endpoint,\r\n    dt_platform_environment,\r\n    documentType,\r\n    documentName,\r\n    validationId,\r\n    maxScore,\r\n    getScore\r\n  }: PlatformParams): Promise<{ validationId: string, maxScore: number, finalScore: number, auditInfo: any }> {\r\n      // Get the authorization header\r\n    let oauth_header = null;\r\n    const dt_access_token = await this.getOauthAccessToken(oauth_client_id, oauth_client_secret, dt_account_urn, oauth_sso_endpoint);\r\n    if (!dt_access_token) {\r\n      throw new Error(\"Failed to obtain access token\");\r\n    }\r\n    oauth_header = await this.getAuthorizationHeaderPlatform(dt_access_token);\r\n\r\n    // Get documents list\r\n    const documentsList = await this.getDocumentsList(dt_platform_environment, documentType, documentName, oauth_header);\r\n\r\n    // Get document details\r\n    const  { documentDetails } = await this.getDocumentDetails(dt_platform_environment, documentsList, oauth_header);\r\n\r\n    // Generate Audit Info\r\n    const auditInfo = await this.generateAuditInfo({ documentList: documentsList, documentDetails: documentDetails });\r\n\r\n    // Get the score\r\n    const { score: finalScore, assertion_fails: assertionFails } = await getScore(auditInfo, oauth_header);\r\n    auditInfo.assertionFails = assertionFails;\r\n\r\n    return {\r\n      validationId: validationId,\r\n      maxScore: maxScore,\r\n      finalScore: finalScore,\r\n      auditInfo: auditInfo\r\n    };\r\n  }\r\n\r\n  \r\n  async performGradingGen2({\r\n    dt_gen2_environment,\r\n    dt_access_token,\r\n    validationId,\r\n    maxScore,\r\n    entity_type,\r\n    entity_name_to_query,\r\n    config_endpoint,\r\n    config_name_to_query,\r\n    config_endpoint_extra_param,\r\n    settings_schema_id,\r\n    settings_scope,\r\n    getScore\r\n  }: Gen2Params): Promise<{ validationId: string, maxScore: number, finalScore: number, auditInfo: any }> {\r\n      // Get the authorization header\r\n    const auth_header = await this.getAuthorizationHeaderGen2(dt_access_token);\r\n  \r\n    // Get the entities list\r\n    const entitiesList = await this.getEntities(dt_gen2_environment, entity_type, entity_name_to_query, auth_header);\r\n  \r\n    // Get the entities data\r\n    const entitiesData = await this.getEntitiesData(dt_gen2_environment, entitiesList, auth_header);\r\n  \r\n    // Get API v1 config data\r\n    const configList = await this.getConfigsList(dt_gen2_environment, config_endpoint, config_name_to_query, config_endpoint_extra_param, entitiesList, auth_header);\r\n  \r\n    const configDetails = await this.getConfigsData(dt_gen2_environment, config_endpoint, configList, auth_header);\r\n\r\n    // Get the settings data\r\n    const settingsData = await this.getSettingsData(dt_gen2_environment, entitiesList, auth_header, settings_schema_id, settings_scope);\r\n  \r\n    // Get the problems data\r\n    const problemsData = await this.getProblemsData(dt_gen2_environment, entitiesList, auth_header);\r\n \r\n    // Get Dashboard List\r\n    const userDashboardList = await this.getUserDashboardList(dt_gen2_environment, auth_header);\r\n    const userDashboardDetails = await this.getDashboardsData(dt_gen2_environment, userDashboardList, auth_header);\r\n\r\n\r\n      // Generate Audit Info\r\n    const auditInfo = await this.generateAuditInfo({\r\n      entitiesList: entitiesList,\r\n      entitiesData: entitiesData,\r\n      settingsData: settingsData,\r\n      configList: configList,\r\n      configDetails: configDetails,\r\n      problemsData: problemsData,\r\n      userDashboardList: userDashboardList,\r\n      userDashboardDetails: userDashboardDetails\r\n    });\r\n\r\n    // Get the score\r\n    const { score: finalScore, assertion_fails: assertionFails } = await getScore(auditInfo,auth_header);\r\n    auditInfo.assertionFails = assertionFails;\r\n\r\n    return {\r\n      validationId: validationId,\r\n      maxScore: maxScore,\r\n      finalScore: finalScore,\r\n      auditInfo: auditInfo\r\n    };\r\n}\r\n\r\n  // A utility function to get the OAuth access token\r\n  async getOauthAccessToken(\r\n    oauth_client_id: string,\r\n    oauth_client_secret: string,\r\n    dt_account_urn: string,\r\n    oauth_sso_endpoint: string\r\n  ): Promise<string | undefined> {\r\n    const myHeaders = new Headers();\r\n    myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\r\n    const urlencoded = new URLSearchParams();\r\n    urlencoded.append(\"grant_type\", \"client_credentials\");\r\n    urlencoded.append(\"client_id\", oauth_client_id);\r\n    urlencoded.append(\"client_secret\", oauth_client_secret);\r\n    urlencoded.append(\"scope\", \"document:documents:admin document:documents:read document:documents:write document:environment-shares:read document:direct-shares:read \");\r\n    urlencoded.append(\"resource\", dt_account_urn);\r\n\r\n    const requestOptions: RequestInit = {\r\n      method: \"POST\",\r\n      headers: myHeaders,\r\n      body: urlencoded,\r\n      redirect: \"follow\"\r\n    };\r\n\r\n    try {\r\n      const response = await fetch(oauth_sso_endpoint, requestOptions);\r\n  \r\n      if (!response.ok) {\r\n        // Check if the response status is 400\r\n        if (response.status === 400) {\r\n          const errorDetails = await response.text();\r\n          this.log(LOG_LEVELS.ERROR, `oAuth Access Token Error: ${response.status} ${errorDetails}`);\r\n          throw new Error(`Bad Request: ${errorDetails}`);\r\n        } else {\r\n          // Handle other non-OK responses\r\n          const errorDetails = await response.text();\r\n          this.log(LOG_LEVELS.ERROR, `oAuth Access Token Error: ${response.status} ${errorDetails}`);\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n      }\r\n  \r\n      const result = await response.json();\r\n      this.log(LOG_LEVELS.DEBUG, \"oAuth Access Token result:\\n\" + JSON.stringify(result, null, 2));\r\n      return result.access_token;\r\n    } catch (error: any) {\r\n      this.log(LOG_LEVELS.ERROR, `oAuth Access Token Error: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  // A utility function to get the authorization header\r\n    async getAuthorizationHeaderPlatform(token: string): Promise<Headers> {\r\n      // Create the headers object\r\n      const headers = new Headers();\r\n      // Add the authorization header\r\n      headers.append(\"Authorization\", \"Bearer \" + token);\r\n      return headers;\r\n    }\r\n  \r\n    // A utility function to get the authorization header\r\n    async  getAuthorizationHeaderGen2(token: string): Promise<Headers> {\r\n      // Create the headers object\r\n      const headers = new Headers();\r\n      // Add the authorization header\r\n      headers.append(\"Authorization\", \"Api-Token \" + token);\r\n      return headers;\r\n    }\r\n\r\n    // A utility function to get the entities list\r\n    async getEntities(environment: string, entity_type: string, entity_name_to_query: string, headers: Headers): Promise<any> {\r\n      // Get the application with the specified name\r\n      const entitySelector = `type(${entity_type}),entityName.contains(${entity_name_to_query})`;\r\n      // Create the request object\r\n      const request = new Request(`${environment}/api/v2/entities?entitySelector=${entitySelector}`, {\r\n        method: \"GET\",\r\n        headers: headers,\r\n      });\r\n  \r\n      let entities = null;\r\n      try {\r\n        const response = await fetch(request);\r\n        if (response.ok) {\r\n          entities = await response.json();\r\n        } else {\r\n          const errorDetails = await response.text();\r\n          this.log(LOG_LEVELS.ERROR, `\"Entity ID Error: ${response.status} ${errorDetails}`);\r\n        }\r\n      } catch (error) {\r\n        this.log(LOG_LEVELS.ERROR, ` ${error}`);\r\n      }\r\n  \r\n      return entities;\r\n    }\r\n  \r\n    // A utility function to get the entities data\r\n    async getEntitiesData(environment: string, entitiesList: any, headers: Headers): Promise<any[]> {\r\n      if (entitiesList === null) {\r\n        return [];\r\n      }\r\n  \r\n      let entitiesData: any[] = [];\r\n      for (const entity of entitiesList.entities) {\r\n        const entityId = entity.entityId;\r\n        const request = new Request(`${environment}/api/v2/entities/${entityId}`, {\r\n          method: \"GET\",\r\n          headers: headers,\r\n        });\r\n  \r\n        try {\r\n          const response = await fetch(request);\r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            entitiesData.push(data);\r\n          } else {\r\n            const errorDetails = await response.text();\r\n            this.log(LOG_LEVELS.ERROR, `Entity Details Error: ${response.status} ${errorDetails}`);\r\n          }\r\n        } catch (error) {\r\n          this.log(LOG_LEVELS.ERROR, ` ${error}`);\r\n        }\r\n      }\r\n  \r\n      return entitiesData;\r\n    }\r\n\r\n\r\n  // A utility function to get the dashboard configs list\r\n  async getUserDashboardList(\r\n    environment: string,\r\n    headers: Headers\r\n  ): Promise<any[]> {\r\n    let dashboard_list: any[] = [];\r\n    let user_dashboard_list: any[] = [];\r\n    const config_endpoint = \"/api/config/v1/dashboards\";\r\n    const config_endpoint_extra_param = \"\";\r\n    \r\n    try {\r\n      dashboard_list = await this.getConfigsList(\r\n        environment,\r\n        config_endpoint,\r\n        \"\", \r\n        config_endpoint_extra_param,\r\n        null,\r\n        headers\r\n      );\r\n      this.log(LOG_LEVELS.DEBUG, \"dashboard_list raw:\\n\" + JSON.stringify(dashboard_list[0].dashboards, null, 2));\r\n      // Filter the dashboards based on the owner field\r\n      let dashboards = dashboard_list[0].dashboards.filter((dashboard: any) => dashboard.owner !== \"Dynatrace\");\r\n    \r\n      if (dashboards.length > 0) {\r\n        user_dashboard_list.push({dashboards: dashboards});\r\n      }\r\n      this.log(LOG_LEVELS.DEBUG, \"user_dashboard_list:\\n\" + JSON.stringify(user_dashboard_list[0].dashboards, null, 2));\r\n    } catch (error) {\r\n      this.log(LOG_LEVELS.ERROR, `getUserDashboardList Error: ${error}`);\r\n    }\r\n\r\n    return user_dashboard_list;\r\n  }\r\n\r\n\r\n  async getDashboardsData(\r\n    environment: string,\r\n    dashboardList: any,\r\n    headers: Headers\r\n  ): Promise<any[]> {\r\n    if (dashboardList === null) {\r\n      return [];\r\n    }\r\n\r\n    let dashboardsData: any[] = [];\r\n    const config_endpoint = \"/api/config/v1/dashboards\";\r\n\r\n    try {\r\n      dashboardsData = await this.getConfigsData(\r\n        environment,\r\n        config_endpoint,\r\n        dashboardList,\r\n        headers\r\n      );\r\n      this.log(LOG_LEVELS.DEBUG, \"dashboardsData:\\n\" + JSON.stringify(dashboardsData, null, 2));\r\n    } catch (error) {\r\n      this.log(LOG_LEVELS.ERROR, `getDashboardsData Error: ${error}`);\r\n    }\r\n\r\n    return dashboardsData;\r\n  }\r\n\r\n  // A utility function to get the configs list\r\n  async getConfigsList(\r\n    environment: string,\r\n    config_endpoint: string,\r\n    config_name_to_query: string,\r\n    config_endpoint_extra_param: string,\r\n    entitiesList: any,\r\n    headers: Headers\r\n  ): Promise<any[]> {\r\n    let config_list: any[] = [];\r\n    if (config_endpoint === \"\") {\r\n      return [];\r\n    }\r\n    let parameters = \"\";\r\n    if (config_endpoint_extra_param.includes(\"/\") && !entitiesList) {\r\n      for (const entity of entitiesList.entities) {\r\n        const entityId = entity.entityId;\r\n        parameters = \"/\" + entityId + config_endpoint_extra_param;\r\n        let result = await this.callConfigList(environment, config_endpoint, config_name_to_query, parameters, headers);\r\n        config_list.push(result);\r\n      }\r\n      this.log(LOG_LEVELS.DEBUG, \"Config List with extra param /\");\r\n    } else if (config_endpoint_extra_param.includes(\"?\")) {\r\n      parameters = config_endpoint_extra_param;\r\n      let result = await this.callConfigList(environment, config_endpoint, config_name_to_query, parameters, headers);\r\n      config_list.push(result);\r\n      this.log(LOG_LEVELS.DEBUG, \"Config List with extra param ?\");\r\n    } else {\r\n      let result = await this.callConfigList(environment, config_endpoint, config_name_to_query, parameters, headers);\r\n      config_list.push(result);\r\n    }\r\n\r\n    return config_list;\r\n  }\r\n\r\n  // A utility function to call the config list\r\n  async callConfigList(\r\n    environment: string,\r\n    config_endpoint: string,\r\n    config_name_to_query: string,\r\n    parameters: string,\r\n    headers: Headers\r\n  ): Promise<any> {\r\n    const request = new Request(environment + config_endpoint + parameters, {\r\n      method: \"GET\",\r\n      headers: headers,\r\n    });\r\n\r\n    let configlist = [];\r\n    try {\r\n      const response = await fetch(request);\r\n      if (response.ok) {\r\n        configlist = await response.json();\r\n      } else {\r\n        const errorDetails = await response.text();\r\n        this.log(LOG_LEVELS.ERROR, `ConfigList Error: ${response.status} ${errorDetails}`);\r\n      }\r\n    } catch (error) {\r\n      this.log(LOG_LEVELS.ERROR, `${error}`);      \r\n    }\r\n    return configlist;\r\n  }\r\n  \r\n  async getConfigsData(\r\n    environment: string,\r\n    config_endpoint: string,\r\n    configList: any,\r\n    headers: Headers\r\n  ): Promise<any[]> {\r\n    if (configList === null) {\r\n      return [];\r\n    }\r\n\r\n    let configsData: any[] = [];\r\n    for (const item of configList) {\r\n      for (const key in item) {\r\n        if (key && key != null && Array.isArray(item[key])) {\r\n          for (const subItem of item[key]) {\r\n            const id = subItem ? subItem.entityId || subItem.id : null;\r\n            if (id) {\r\n              const request_details: RequestInfo = new Request(environment + config_endpoint + \"/\" + id, {\r\n                method: 'GET',\r\n                headers: headers,\r\n              });\r\n\r\n              try {\r\n                const response_details = await fetch(request_details);\r\n                if (response_details.ok) {\r\n                  const configdetails = await response_details.json();\r\n                  configsData.push(configdetails);\r\n                } else {\r\n                  const errorDetails = await response_details.text();\r\n                  this.log(LOG_LEVELS.ERROR, `Config Data Error: ${response_details.status} ${errorDetails}`);\r\n                }\r\n              } catch (error) {\r\n                this.log(LOG_LEVELS.ERROR, `${error}`);    \r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return configsData;\r\n  }\r\n\r\n  // A utility function to get the settings data with schema\r\n  async getSettingsData(\r\n    environment: string,\r\n    entitiesList: any,\r\n    headers: Headers,\r\n    schemaId: string,\r\n    scope: string\r\n  ): Promise<any[]> {\r\n    let settings_list: any[] = [];\r\n    if (schemaId === \"\") {\r\n      return [];\r\n    }\r\n\r\n    let generated_scope = \"\";\r\n    // if scope equals \"entity\", replace the dynamic entityID, if the scope is \"environment\" it will remain as is\r\n    if (scope === \"entity\") {\r\n      for (const entity of entitiesList.entities) {\r\n        const entityId = entity.entityId;\r\n        generated_scope = generated_scope + entityId + \",\";\r\n      }\r\n    } else {\r\n      generated_scope = scope;\r\n    }\r\n\r\n    if (generated_scope == \"\") {\r\n      return [];\r\n    }\r\n\r\n    const parameters = \"schemaIds=\" + schemaId + \"&scopes=\" + generated_scope;\r\n    const request = new Request(environment + \"/api/v2/settings/objects?\" + parameters, {\r\n      method: \"GET\",\r\n      headers: headers,\r\n    });\r\n    let data = {};\r\n    try {\r\n      const response = await fetch(request);\r\n      if (response.ok) {\r\n        data = await response.json();\r\n        settings_list.push(data);\r\n      } else {\r\n        const errorDetails = await response.text();\r\n        this.log(LOG_LEVELS.ERROR, `Settings Data Error: ${response.status} ${errorDetails}`);\r\n      }\r\n    } catch (error) {\r\n      this.log(LOG_LEVELS.ERROR, `${error}`);    \r\n    }\r\n    return settings_list;\r\n  }\r\n\r\n// A utility function to find the Problems\r\nasync getProblemsData(\r\n  environment: string,\r\n  entitiesList: any,\r\n  headers: Headers\r\n): Promise<any> {\r\n  if (!entitiesList || !entitiesList.entities || entitiesList.entities.length <= 0) {\r\n    return null;\r\n  }\r\n\r\n  let rootCauseEntities = \"\";\r\n  for (const entity of entitiesList.entities) {\r\n    const entityId = entity.entityId;\r\n    rootCauseEntities += \",\" + entityId;\r\n  }\r\n  // Remove the leading comma\r\n  rootCauseEntities = rootCauseEntities.substring(1);\r\n\r\n  // Create the request object\r\n  const request = new Request(\r\n    `${environment}/api/v2/problems?from=now-6h&problemSelector=rootCauseEntity(${rootCauseEntities})`,\r\n    {\r\n      method: \"GET\",\r\n      headers: headers,\r\n    }\r\n  );\r\n\r\n  let data = null;\r\n  try {\r\n    const response = await fetch(request);\r\n    if (response.ok) {\r\n      data = await response.json();\r\n    } else {\r\n      const errorDetails = await response.text();\r\n      this.log(LOG_LEVELS.ERROR, `Problems Data Error: ${response.status} ${errorDetails}`);\r\n    }\r\n  } catch (error) {\r\n    this.log(LOG_LEVELS.ERROR, `${error}`);    \r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n  // A utility function to get the documents list\r\n  async getDocumentsList(\r\n    environment: string,\r\n    document_type: string,\r\n    document_name_to_query: string,\r\n    headers: Headers\r\n  ): Promise<any> {\r\n\r\n    // Normalize the document_name_to_query by removing spaces and converting to lowercase\r\n    //const normalizedDocumentName = document_name_to_query.replace(/\\s+/g, '').toLowerCase();\r\n\r\n    const documentFilter = `name contains '${document_name_to_query}' and type == '${document_type}'`;\r\n    const request = new Request(`${environment}/platform/document/v1/documents?admin-access=true&filter=${encodeURIComponent(documentFilter)}`, {\r\n      method: \"GET\",\r\n      headers: headers,\r\n    });\r\n  \r\n    this.log(LOG_LEVELS.DEBUG, \"documentFilter:\\n\" + JSON.stringify(documentFilter, null, 2));\r\n  \r\n    let documents = null;\r\n    try {\r\n      this.log(LOG_LEVELS.DEBUG, \"headers:\\n\" + JSON.stringify(headers, null, 2));\r\n      const response = await fetch(request);\r\n      this.log(LOG_LEVELS.DEBUG, \"response:\\n\" + JSON.stringify(response, null, 2));\r\n      if (response.ok) {\r\n        documents = await response.json();\r\n      } else {\r\n        const errorDetails = await response.text();\r\n        this.log(LOG_LEVELS.ERROR, `Document List Error: ${response.status} ${errorDetails}`);\r\n      }\r\n    } catch (error) {\r\n      this.log(LOG_LEVELS.ERROR, `${error}`);    \r\n    }\r\n  \r\n    return documents;\r\n  }   \r\n\r\n    // A utility function to get the document details\r\n    async getDocumentDetails(\r\n      environment: string,\r\n      documentsList: any,\r\n      headers: Headers\r\n    ): Promise<{ documentDetails: any[] }> {\r\n      if (documentsList === null) {\r\n        return { documentDetails: [] };\r\n      }\r\n    \r\n      let documentDetails: any[] = [];\r\n      const requestOptions: RequestInit = {\r\n        method: \"GET\",\r\n        headers: headers,\r\n      };\r\n    \r\n      for (const document of documentsList.documents) {\r\n        const documentId = String(document.id);\r\n        try {\r\n          const response = await fetch(`${environment}/platform/document/v1/documents/${documentId}/content?admin-access=true`, requestOptions);\r\n          if (response.ok) {\r\n            const result = await response.json();\r\n\r\n            // Fetch direct-shares information\r\n            const documentSharesFilter = `documentId=='${documentId}'`;\r\n            const directSharesResponse = await fetch(`${environment}/platform/document/v1/direct-shares?filter=${encodeURIComponent(documentSharesFilter)}`, requestOptions);\r\n            if (directSharesResponse.ok) {\r\n              const directSharesResult = await directSharesResponse.json();\r\n              this.log(LOG_LEVELS.DEBUG, \"directSharesResult:\\n\" + JSON.stringify(directSharesResult, null, 2));\r\n              result[\"direct-shares\"] = directSharesResult[\"direct-shares\"];\r\n            } else {\r\n              const errorDetails = await directSharesResponse.text();\r\n              this.log(LOG_LEVELS.ERROR, `Direct Shares Error: ${directSharesResponse.status} ${errorDetails}`);\r\n            }\r\n\r\n            // Fetch environment-shares information\r\n            const environmentSharesResponse = await fetch(`${environment}/platform/document/v1/environment-shares?filter=${encodeURIComponent(documentSharesFilter)}`, requestOptions);\r\n            if (environmentSharesResponse.ok) {\r\n              const environmentSharesResult = await environmentSharesResponse.json();\r\n              this.log(LOG_LEVELS.DEBUG, \"environmentSharesResult:\\n\" + JSON.stringify(environmentSharesResult, null, 2));\r\n              result[\"environment-shares\"] = environmentSharesResult[\"environment-shares\"];\r\n            } else {\r\n              const errorDetails = await environmentSharesResponse.text();\r\n              this.log(LOG_LEVELS.ERROR, `Environment Shares Error: ${environmentSharesResponse.status} ${errorDetails}`);\r\n            }\r\n\r\n            if (result.sections) {\r\n              result.sections.forEach((section: any) => {\r\n                if (section.state && section.state.result) {\r\n                  delete section.state.result;\r\n                }\r\n                if (section.state.davis && section.state.davis.resultState) {\r\n                  delete section.state.davis.resultState;\r\n                }\r\n              });\r\n            }\r\n            documentDetails.push(result);\r\n          } else {\r\n            const errorDetails = await response.text();\r\n            this.log(LOG_LEVELS.ERROR, `Document Details Error: ${response.status} ${errorDetails}`);\r\n          }\r\n        } catch (error) {\r\n          this.log(LOG_LEVELS.ERROR, `${error}`);    \r\n        }\r\n      }\r\n    \r\n      // Check the size of the resulting JSON\r\n      const jsonString = JSON.stringify(documentDetails);\r\n      const jsonSize = new Blob([jsonString]).size;\r\n      if (jsonSize > this.jsonSizeThreshold) {\r\n        documentDetails.push({ warning: \"The size of the JSON output is too large\" });\r\n      }\r\n\r\n      return { documentDetails};\r\n    }\r\n\r\n    async generateAuditInfo({\r\n      documentList,\r\n      documentDetails,\r\n      entitiesList,\r\n      entitiesData,\r\n      settingsData,\r\n      configList,\r\n      configDetails,\r\n      problemsData,\r\n      userDashboardList,\r\n      userDashboardDetails\r\n    }: AuditInfoParams): Promise<any> {\r\n      let audit_info: any = {};\r\n    \r\n      if (documentList != null) {\r\n        audit_info[\"documentList\"] = documentList;\r\n      }\r\n    \r\n      if (documentDetails != null) {\r\n        audit_info[\"documentDetails\"] = documentDetails;\r\n      }\r\n    \r\n      if (entitiesList != null) {\r\n        audit_info[\"entitiesList\"] = entitiesList;\r\n      }\r\n    \r\n      if (entitiesData != null) {\r\n        audit_info[\"entitiesData\"] = entitiesData;\r\n      }\r\n    \r\n      if (configList != null) {\r\n        audit_info[\"configList\"] = configList;\r\n      }\r\n    \r\n      if (configDetails != null && configDetails.error == null) {\r\n        audit_info[\"configDetails\"] = configDetails;\r\n      }\r\n    \r\n      if (settingsData != null) {\r\n        audit_info[\"settingsData\"] = settingsData;\r\n      }\r\n    \r\n      if (problemsData != null) {\r\n        audit_info[\"problemsData\"] = problemsData;\r\n      }\r\n\r\n      if (userDashboardList != null) {\r\n        audit_info[\"userDashboardList\"] = userDashboardList;\r\n      }\r\n\r\n      if (userDashboardDetails != null) {\r\n        audit_info[\"userDashboardDetails\"] = userDashboardDetails;\r\n      }\r\n    \r\n      audit_info.assertionFails = [];\r\n\r\n    return audit_info;\r\n  }   \r\n\r\n\r\n    checkKeywordsExistence(inputValue: string, keywords: string[]): boolean {\r\n      // Normalize the input by removing spaces and converting to lowercase\r\n      const normalizedInput = inputValue.replace(/\\s+/g, '').toLowerCase();\r\n\r\n      // Normalize the keywords by removing spaces and converting to lowercase\r\n      const normalizedKeywords = keywords.map(keyword => keyword.replace(/\\s+/g, '').toLowerCase());\r\n    \r\n      return normalizedKeywords.every(keyword => normalizedInput.includes(keyword));\r\n    }\r\n\r\n    findIdInObject(object: any): string | null {\r\n      for (const property in object) {\r\n        if (object.hasOwnProperty(property)) {\r\n          if (typeof object[property] === \"object\") {\r\n            const id = this.findIdInObject(object[property]);\r\n            if (id) return id;\r\n          } else if (property === 'id' || property === 'entityId') {\r\n            return object[property];\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n\r\n    log(level: LOG_LEVELS, message: string): void {\r\n      if (level <= this.currentLogLevel) {\r\n        console.log(message);\r\n      }\r\n    }\r\n\r\n}\r\n\r\nexport default DTFunctions;"],"names":["QuestionSDK","prototype","createQuestion","id","question","description","_iteratorSymbol","Symbol","iterator","_settle","pact","state","value","s","_Pact","o","bind","v","then","observer","LOG_LEVELS","onFulfilled","onRejected","result","this","callback","e","_this","_isSettledPact","thenable","array","body","check","reject","_cycle","i","length","_forOf","target","step","next","done","_fixup","TypeError","values","push","DTFunctions","currentLogLevel","ERROR","jsonSizeThreshold","_proto","setLogLevel","level","performGradingPlatform","_ref","oauth_client_id","oauth_client_secret","dt_account_urn","oauth_sso_endpoint","dt_platform_environment","documentType","documentName","validationId","maxScore","getScore","oauth_header","Promise","resolve","getOauthAccessToken","dt_access_token","Error","getAuthorizationHeaderPlatform","_this$getAuthorizatio","getDocumentsList","documentsList","getDocumentDetails","_ref2","generateAuditInfo","documentList","documentDetails","auditInfo","_ref3","finalScore","score","assertionFails","assertion_fails","performGradingGen2","_ref4","dt_gen2_environment","entity_type","entity_name_to_query","config_endpoint","config_name_to_query","config_endpoint_extra_param","settings_schema_id","settings_scope","_this2","getAuthorizationHeaderGen2","auth_header","getEntities","entitiesList","getEntitiesData","entitiesData","getConfigsList","configList","getConfigsData","configDetails","getSettingsData","settingsData","getProblemsData","problemsData","getUserDashboardList","userDashboardList","getDashboardsData","userDashboardDetails","_ref5","_this3","myHeaders","Headers","append","urlencoded","URLSearchParams","requestOptions","method","headers","redirect","_catch","fetch","response","_temp2","_result2","json","log","DEBUG","JSON","stringify","access_token","_temp","ok","status","text","errorDetails","error","message","token","environment","_this4","request","Request","entities","_temp4","_temp3","_response$json","_this5","_temp7","entity","entityId","_temp6","_temp5","data","_this6","dashboard_list","user_dashboard_list","_temp8","_this6$getConfigsList","dashboards","filter","dashboard","owner","dashboardList","_this7","dashboardsData","_temp9","_this7$getConfigsData","_this8","config_list","parameters","_temp13","includes","_temp11","_temp10","callConfigList","_temp14","_this9","configlist","_temp16","_temp15","_response$json2","_this10","configsData","_temp20","item","key","keys","_forTo","Array","isArray","subItem","_temp19","request_details","_temp18","response_details","_temp17","configdetails","_forIn","schemaId","scope","_this11","settings_list","generated_scope","_iterator","_step","_createForOfIteratorHelperLoose","_temp22","_temp21","_response$json3","_this12","_step2","rootCauseEntities","_iterator2","substring","_temp24","_temp23","_response$json4","document_type","document_name_to_query","_this13","documentFilter","encodeURIComponent","documents","_temp26","_temp25","_response$json5","_temp34","jsonString","Blob","size","_this14","warning","_temp33","document","documentId","String","_temp32","_temp31","documentSharesFilter","directSharesResponse","_temp30","environmentSharesResponse","_temp28","sections","forEach","section","davis","resultState","_temp27","environmentSharesResult","_temp29","directSharesResult","_ref6","audit_info","checkKeywordsExistence","inputValue","keywords","normalizedInput","replace","toLowerCase","map","keyword","every","findIdInObject","object","property","hasOwnProperty","console"],"mappings":"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"}